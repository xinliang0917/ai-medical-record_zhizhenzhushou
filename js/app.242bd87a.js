(function(){"use strict";var __webpack_modules__={8440:function(e,a,l){var t=l(5130),o=l(6768);const r={class:"app-container"};var n={__name:"App",setup(e){return(e,a)=>{const l=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)("div",r,[(0,o.bF)(l)])}}};const u=n;var s=u,d=l(1387),i=(l(4114),l(144)),c=l(1219);const _={ref:"canvas"};function p(e,a,l,t,r,n){return(0,o.uX)(),(0,o.CE)("canvas",_,null,512)}var m=l(8764),v=l(1241);const b=(0,v.A)(m.A,[["render",p]]);var f=b;const k={class:"login-container"},g={class:"verify-code-wrapper"};var h={__name:"UserLogin",setup(e){const a=(0,d.rd)(),l=(0,i.KR)(null),t=(0,i.KR)(null),r=(0,i.Kh)({username:"",password:"",verifyCode:""}),n=(0,i.KR)(""),u=e=>{n.value=e,console.log("VueCanvasVerify 通过 @getCode 触发，新验证码:",n.value)},s={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:15,message:"长度在 3 到 15 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:"blur"}],verifyCode:[{required:!0,message:"请输入验证码",trigger:"blur"},{validator:(e,a,l)=>{console.log("校验中 - 用户输入:",a," 小写:",a.toLowerCase()),console.log("校验中 - 生成验证码:",n.value," 小写:",n.value.toLowerCase()),n.value?a.toLowerCase()!==n.value.toLowerCase()?(l(new Error("验证码不正确")),r.verifyCode=""):l():l(new Error("验证码未生成，请刷新页面或检查组件！"))},trigger:"blur"}]},_=()=>{l.value.validate(async e=>{if(!e)return c.nk.error("请检查输入信息！"),r.verifyCode&&n.value&&r.verifyCode.toLowerCase()!==n.value.toLowerCase()&&(r.verifyCode=""),!1;"111"===r.username&&"123456"===r.password?(c.nk.success("登录成功！"),localStorage.setItem("token","test_token"),localStorage.setItem("username",r.username),a.push("/index")):(c.nk.error("用户名或密码错误！"),r.verifyCode="")})},p=()=>{c.nk.info("请联系管理员进行注册或访问注册页面"),console.log("跳转到注册页面或显示注册表单")};return(e,a)=>{const n=(0,o.g2)("el-input"),d=(0,o.g2)("el-form-item"),i=(0,o.g2)("el-button"),c=(0,o.g2)("el-form"),m=(0,o.g2)("el-card");return(0,o.uX)(),(0,o.CE)("div",k,[(0,o.bF)(m,{class:"login-card"},{header:(0,o.k6)(()=>a[3]||(a[3]=[(0,o.Lk)("div",{class:"card-header"},[(0,o.Lk)("span",null,"智诊助手登录")],-1)])),default:(0,o.k6)(()=>[(0,o.bF)(c,{model:r,rules:s,ref_key:"loginFormRef",ref:l,"label-width":"80px"},{default:(0,o.k6)(()=>[(0,o.bF)(d,{label:"用户名",prop:"username"},{default:(0,o.k6)(()=>[(0,o.bF)(n,{modelValue:r.username,"onUpdate:modelValue":a[0]||(a[0]=e=>r.username=e),placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1}),(0,o.bF)(d,{label:"密码",prop:"password"},{default:(0,o.k6)(()=>[(0,o.bF)(n,{type:"password",modelValue:r.password,"onUpdate:modelValue":a[1]||(a[1]=e=>r.password=e),placeholder:"请输入密码"},null,8,["modelValue"])]),_:1}),(0,o.bF)(d,{label:"验证码",prop:"verifyCode"},{default:(0,o.k6)(()=>[(0,o.Lk)("div",g,[(0,o.bF)(n,{modelValue:r.verifyCode,"onUpdate:modelValue":a[2]||(a[2]=e=>r.verifyCode=e),placeholder:"请输入验证码",class:"verify-code-input"},null,8,["modelValue"]),(0,o.bF)(f,{ref_key:"canvasVerifyRef",ref:t,onGetCode:u,width:120,height:40,class:"canvas-verify-code"},null,512)])]),_:1}),(0,o.bF)(d,null,{default:(0,o.k6)(()=>[(0,o.bF)(i,{type:"primary",onClick:_},{default:(0,o.k6)(()=>a[4]||(a[4]=[(0,o.eW)("登录")])),_:1,__:[4]}),(0,o.bF)(i,{onClick:p},{default:(0,o.k6)(()=>a[5]||(a[5]=[(0,o.eW)("注册")])),_:1,__:[5]})]),_:1})]),_:1},8,["model"])]),_:1})])}}};const y=(0,v.A)(h,[["__scopeId","data-v-712c2784"]]);var w=y,F=l(4232),V=l(7477);const C={class:"common-layout"},x={class:"user-info"};var L={__name:"UserIndex",setup(e){const a=(0,d.rd)(),l=(0,d.lq)(),t=(0,i.KR)(""),r=(0,o.EW)(()=>l.path);(0,o.sV)(()=>{t.value=localStorage.getItem("username")||"用户"});const n=()=>{localStorage.removeItem("token"),localStorage.removeItem("username"),a.push("/")};return(e,a)=>{const l=(0,o.g2)("el-button"),u=(0,o.g2)("el-header"),s=(0,o.g2)("el-icon"),d=(0,o.g2)("el-menu-item"),c=(0,o.g2)("el-menu"),_=(0,o.g2)("el-aside"),p=(0,o.g2)("router-view"),m=(0,o.g2)("el-main"),v=(0,o.g2)("el-container");return(0,o.uX)(),(0,o.CE)("div",C,[(0,o.bF)(v,null,{default:(0,o.k6)(()=>[(0,o.bF)(u,{class:"header"},{default:(0,o.k6)(()=>[a[1]||(a[1]=(0,o.Lk)("div",{class:"logo"},"智诊助手 AI 医疗病历自动化系统",-1)),(0,o.Lk)("div",x,[(0,o.Lk)("span",null,"欢迎，"+(0,F.v_)(t.value)+"！",1),(0,o.bF)(l,{type:"text",onClick:n},{default:(0,o.k6)(()=>a[0]||(a[0]=[(0,o.eW)("退出登录")])),_:1,__:[0]})])]),_:1,__:[1]}),(0,o.bF)(v,{class:"main-container"},{default:(0,o.k6)(()=>[(0,o.bF)(_,{width:"200px",class:"aside"},{default:(0,o.k6)(()=>[(0,o.bF)(c,{"default-active":r.value,class:"el-menu-vertical-demo",onSelect:e.handleMenuSelect,router:""},{default:(0,o.k6)(()=>[(0,o.bF)(d,{index:"/index"},{default:(0,o.k6)(()=>[(0,o.bF)(s,null,{default:(0,o.k6)(()=>[(0,o.bF)((0,i.R1)(V.e7F))]),_:1}),a[2]||(a[2]=(0,o.Lk)("span",null,"问诊记录",-1))]),_:1,__:[2]}),(0,o.bF)(d,{index:"/index/speech-to-text"},{default:(0,o.k6)(()=>[(0,o.bF)(s,null,{default:(0,o.k6)(()=>[(0,o.bF)((0,i.R1)(V.tmR))]),_:1}),a[3]||(a[3]=(0,o.Lk)("span",null,"语音转文字",-1))]),_:1,__:[3]}),(0,o.bF)(d,{index:"/index/settings"},{default:(0,o.k6)(()=>[(0,o.bF)(s,null,{default:(0,o.k6)(()=>[(0,o.bF)((0,i.R1)(V.B5R))]),_:1}),a[4]||(a[4]=(0,o.Lk)("span",null,"设置",-1))]),_:1,__:[4]})]),_:1},8,["default-active","onSelect"])]),_:1}),(0,o.bF)(m,{class:"main-content"},{default:(0,o.k6)(()=>[(0,o.bF)(p)]),_:1})]),_:1})]),_:1})])}}};const R=(0,v.A)(L,[["__scopeId","data-v-608cf152"]]);var S=R;const U={class:"settings-container"};var E={__name:"UserSettings",setup(e){const a=(0,i.KR)(null),l=(0,i.KR)(localStorage.getItem("username")||"医生"),t=(0,i.KR)("123456"),r=(0,i.Kh)({username:l.value,oldPassword:"",newPassword:"",confirmNewPassword:""}),n=(e,a,l)=>{""===a?l(new Error("请再次输入新密码")):a!==r.newPassword?l(new Error("两次输入的密码不一致！")):l()},u={username:[{required:!0,message:"用户名不能为空",trigger:"blur"},{min:3,max:15,message:"长度在 3 到 15 个字符",trigger:"blur"}],oldPassword:[{required:!0,message:"请输入旧密码",trigger:"blur"}],newPassword:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:"blur"}],confirmNewPassword:[{required:!0,validator:n,trigger:"blur"}]},s=()=>{a.value.validate(e=>{if(!e)return c.nk.error("请检查输入信息！"),!1;r.oldPassword===t.value?(l.value=r.username,t.value=r.newPassword,localStorage.setItem("username",r.username),c.nk.success("用户信息修改成功！"),r.oldPassword="",r.newPassword="",r.confirmNewPassword=""):c.nk.error("旧密码不正确，请重新输入！")})},d=()=>{a.value.resetFields(),r.username=l.value};return(0,o.sV)(()=>{r.username=l.value}),(e,l)=>{const t=(0,o.g2)("el-input"),n=(0,o.g2)("el-form-item"),i=(0,o.g2)("el-button"),c=(0,o.g2)("el-form"),_=(0,o.g2)("el-card");return(0,o.uX)(),(0,o.CE)("div",U,[l[7]||(l[7]=(0,o.Lk)("h2",{class:"page-title"},"用户设置",-1)),(0,o.bF)(_,{class:"setting-card"},{header:(0,o.k6)(()=>l[4]||(l[4]=[(0,o.Lk)("div",{class:"card-header"},"修改个人信息",-1)])),default:(0,o.k6)(()=>[(0,o.bF)(c,{model:r,rules:u,ref_key:"settingsFormRef",ref:a,"label-width":"100px"},{default:(0,o.k6)(()=>[(0,o.bF)(n,{label:"用户名",prop:"username"},{default:(0,o.k6)(()=>[(0,o.bF)(t,{modelValue:r.username,"onUpdate:modelValue":l[0]||(l[0]=e=>r.username=e),placeholder:"请输入新用户名"},null,8,["modelValue"])]),_:1}),(0,o.bF)(n,{label:"旧密码",prop:"oldPassword"},{default:(0,o.k6)(()=>[(0,o.bF)(t,{type:"password",modelValue:r.oldPassword,"onUpdate:modelValue":l[1]||(l[1]=e=>r.oldPassword=e),placeholder:"请输入旧密码"},null,8,["modelValue"])]),_:1}),(0,o.bF)(n,{label:"新密码",prop:"newPassword"},{default:(0,o.k6)(()=>[(0,o.bF)(t,{type:"password",modelValue:r.newPassword,"onUpdate:modelValue":l[2]||(l[2]=e=>r.newPassword=e),placeholder:"请输入新密码"},null,8,["modelValue"])]),_:1}),(0,o.bF)(n,{label:"确认新密码",prop:"confirmNewPassword"},{default:(0,o.k6)(()=>[(0,o.bF)(t,{type:"password",modelValue:r.confirmNewPassword,"onUpdate:modelValue":l[3]||(l[3]=e=>r.confirmNewPassword=e),placeholder:"请再次输入新密码"},null,8,["modelValue"])]),_:1}),(0,o.bF)(n,null,{default:(0,o.k6)(()=>[(0,o.bF)(i,{type:"primary",onClick:s},{default:(0,o.k6)(()=>l[5]||(l[5]=[(0,o.eW)("保存修改")])),_:1,__:[5]}),(0,o.bF)(i,{onClick:d},{default:(0,o.k6)(()=>l[6]||(l[6]=[(0,o.eW)("重置")])),_:1,__:[6]})]),_:1})]),_:1},8,["model"])]),_:1})])}}};const q=(0,v.A)(E,[["__scopeId","data-v-7e7b6a53"]]);var X=q,A=l(3514);const N={class:"recorder-controls"},P={key:0,class:"transcribed-text-container"},W={key:1,class:"transcribed-text-placeholder"},K={key:0},I={class:"dialog-content"},T={key:0},O={key:0},M={style:{"margin-left":"15px"}},j={key:1};var $={__name:"SpeechToText",setup(e){const a=(0,i.KR)(null),l=(0,i.KR)([]),t=(0,i.KR)(!1),r=(0,i.KR)(""),n=(0,i.KR)(!1),u=(0,i.KR)(!1),s=(0,i.KR)(null),d=async()=>{r.value="",l.value=[];try{const e=await navigator.mediaDevices.getUserMedia({audio:!0}),o="audio/wav";let r={};MediaRecorder.isTypeSupported(o)?(r={mimeType:o},console.log(`浏览器支持录制 ${o} 格式。`)):(console.warn(`浏览器不支持录制 ${o} 格式。将使用默认格式。`),c.nk.warning(`您的浏览器可能不支持直接录制 ${o} 格式。转写可能会失败，请联系管理员。`)),a.value=new MediaRecorder(e,r),a.value.ondataavailable=e=>{l.value.push(e.data)},a.value.onstop=async()=>{const e=new Blob(l.value,{type:a.value.mimeType});await p(e),l.value=[]},a.value.start(),t.value=!0,c.nk.success("开始录音...")}catch(e){console.error("无法访问麦克风或录音失败:",e),c.nk.error("无法开始录音，请检查麦克风权限或设备。")}},_=()=>{a.value&&t.value&&(a.value.stop(),t.value=!1,c.nk.info("录音停止，正在处理..."))},p=async e=>{n.value=!0;try{const a=new FormData,l=e.type.split("/")[1]||"wav",t=`recording.${l}`,o=new File([e],t,{type:e.type});a.append("audio",o);const n=await A.A.post("http://127.0.0.1:5000/transcribe-audio",a,{headers:{"Content-Type":"multipart/form-data"}});r.value=n.data.transcribedText,c.nk.success("语音转写成功！")}catch(a){console.error("语音转写失败:",a);let e="后端转写失败，请检查后端日志。";a.response&&a.response.data&&a.response.data.error?e=`后端转写失败: ${a.response.data.error}`:a.message&&(e=`语音转写过程中发生错误: ${a.message}`),c.nk.error(e)}finally{n.value=!1}},m=async()=>{if(r.value){c.nk.info("正在根据转写内容生成量化表...");try{const e=await fetch("http://localhost:5000/generate-form",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({conversation_text:r.value})});if(!e.ok){const a=await e.json();throw new Error(`生成量化表失败: ${a.error||e.statusText}`)}const a=await e.json();s.value=a,u.value=!0,c.nk.success("量化表生成成功！")}catch(e){console.error("生成量化表失败:",e),c.nk.error("量化表生成失败: "+e.message),s.value=null}}else c.nk.warning("没有可用于生成量化表的转写内容！")};return(e,a)=>{const l=(0,o.g2)("el-button"),n=(0,o.g2)("el-input"),c=(0,o.g2)("el-dialog"),p=(0,o.g2)("el-card");return(0,o.uX)(),(0,o.Wv)(p,{class:"speech-to-text-card"},{header:(0,o.k6)(()=>a[3]||(a[3]=[(0,o.Lk)("div",{class:"card-header"},[(0,o.Lk)("span",null,"语音转文字")],-1)])),default:(0,o.k6)(()=>[(0,o.Lk)("div",N,[(0,o.bF)(l,{type:"primary",icon:(0,i.R1)(V.tmR),onClick:d,disabled:t.value},{default:(0,o.k6)(()=>a[4]||(a[4]=[(0,o.eW)(" 开始录音 ")])),_:1,__:[4]},8,["icon","disabled"]),(0,o.bF)(l,{type:"danger",icon:(0,i.R1)(V.aJS),onClick:_,disabled:!t.value},{default:(0,o.k6)(()=>a[5]||(a[5]=[(0,o.eW)(" 停止录音 ")])),_:1,__:[5]},8,["icon","disabled"]),(0,o.bF)(l,{type:"success",icon:(0,i.R1)(V._OO),onClick:m,disabled:!r.value},{default:(0,o.k6)(()=>a[6]||(a[6]=[(0,o.eW)(" 生成量化表 (基于转写结果) ")])),_:1,__:[6]},8,["icon","disabled"])]),r.value?((0,o.uX)(),(0,o.CE)("div",P,[a[7]||(a[7]=(0,o.Lk)("h4",null,"转写结果：",-1)),(0,o.bF)(n,{type:"textarea",rows:5,modelValue:r.value,"onUpdate:modelValue":a[0]||(a[0]=e=>r.value=e),placeholder:"语音转写结果将显示在这里...",readonly:""},null,8,["modelValue"])])):((0,o.uX)(),(0,o.CE)("div",W,a[8]||(a[8]=[(0,o.Lk)("p",null,"点击“开始录音”按钮，开始您的问诊对话，完成后点击“停止录音”。",-1),(0,o.Lk)("p",null,"系统会将录音内容转换为文字，并自动填充到下方的文本框中。",-1)]))),(0,o.bF)(c,{modelValue:u.value,"onUpdate:modelValue":a[2]||(a[2]=e=>u.value=e),title:"生成的量化表",width:"70%",class:"quantified-form-dialog"},{footer:(0,o.k6)(()=>[(0,o.bF)(l,{type:"primary",onClick:a[1]||(a[1]=e=>u.value=!1)},{default:(0,o.k6)(()=>a[10]||(a[10]=[(0,o.eW)("关闭")])),_:1,__:[10]})]),default:(0,o.k6)(()=>[s.value?((0,o.uX)(),(0,o.CE)("div",K,[a[9]||(a[9]=(0,o.Lk)("h4",null,"量化表内容：",-1)),(0,o.Lk)("div",I,[s.value?((0,o.uX)(),(0,o.CE)("ul",T,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(s.value,(e,a)=>((0,o.uX)(),(0,o.CE)("li",{key:a},[(0,o.Lk)("strong",null,(0,F.v_)(a)+"：",1),"object"===typeof e&&null!==e?((0,o.uX)(),(0,o.CE)("span",O,[(0,o.Lk)("ul",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e,(e,a)=>((0,o.uX)(),(0,o.CE)("li",{key:a},[(0,o.Lk)("strong",M,(0,F.v_)(a)+"：",1),(0,o.eW)((0,F.v_)(e),1)]))),128))])])):((0,o.uX)(),(0,o.CE)("span",j,(0,F.v_)(e),1))]))),128))])):(0,o.Q3)("",!0)])])):(0,o.Q3)("",!0)]),_:1},8,["modelValue"])]),_:1})}}};const z=(0,v.A)($,[["__scopeId","data-v-7fff78b7"]]);var B=z,J=l(3230);const Q={key:0},D={style:{"margin-top":"0"}},H={key:1},G={class:"dialog-content"},Y={key:0},Z={key:0},ee={style:{"margin-left":"15px"}},ae={key:1},le={key:1},te={key:0,class:"chat-container"},oe={class:"sender-label"},re={class:"message-bubble"},ne={class:"dialog-footer"},ue=5;var se={__name:"ConsultationList",setup(e){const a=(0,i.KR)([{id:"001",patientName:"张三",doctorName:"李医生",date:"2025-07-08 10:30",summary:"患者张三，男性，50岁，主诉近期头痛、乏力。初步诊断：偏头痛可能性大。",originalTranscript:[{sender:"doctor",text:"您好，请问您哪里不舒服？"},{sender:"patient",text:"医生，我最近总是头痛，而且感觉很乏力。"},{sender:"doctor",text:"头痛多久了？有什么伴随症状吗？"},{sender:"patient",text:"大概有一个星期了，有时候会觉得恶心，但是没有吐。"}],quantifiedForm:{"基本信息":{"患者姓名":"张三","性别":"男","年龄":"50岁","就诊日期":"2025-07-08 10:30"},"主诉":"患者主诉头部搏动性疼痛，伴恶心、畏光。","现病史":"头痛一周，呈间歇性发作，每次持续数小时，常伴有恶心感，对光线敏感。无发热，无咳嗽。","既往史":"无特殊既往史。","个人史":"无不良嗜好。","家族史":"否认家族遗传病史。","体格检查":{"体温":"36.8°C","脉搏":"80次/分","呼吸":"18次/分","血压":"120/80mmHg","一般情况":"神志清楚，精神可。","专科检查":"神经系统检查未见明显异常。"},"辅助检查":"暂无。","初步诊断":"偏头痛可能性大","鉴别诊断":"紧张性头痛","治疗方案":"建议口服布洛芬，注意休息，避免诱发因素，如熬夜、压力等。","医嘱":"保持规律作息，清淡饮食，避免咖啡因和酒精。头痛发作时可适当休息，放松心情。","复诊建议":"若症状无缓解或加重，请及时复诊。"}},{id:"002",patientName:"李四",doctorName:"王医生",date:"2025-07-07 14:00",summary:"患者李四，女性，30岁，主诉咳嗽、咽痛。初步诊断：急性上呼吸道感染。",originalTranscript:[{sender:"doctor",text:"您好，请问您今天看什么病？"},{sender:"patient",text:"医生，我咳嗽两天了，喉咙也很痛。"},{sender:"doctor",text:"有发烧吗？痰多不多？"},{sender:"patient",text:"没有发烧，痰有点多，黄色的。"}],quantifiedForm:{"基本信息":{"患者姓名":"李四","性别":"女","年龄":"30岁","就诊日期":"2025-07-07 14:00"},"主诉":"患者主诉咳嗽伴咽喉疼痛两天。","现病史":"两天前无明显诱因出现咳嗽，咳少量白痰，咽部疼痛不适，无发热、流涕等。今日痰色转黄。","既往史":"否认慢性病史，无特殊药物过敏史。","个人史":"无烟酒嗜好。","家族史":"无特殊家族病史。","体格检查":{"体温":"37.2°C","脉搏":"75次/分","呼吸":"16次/分","血压":"110/70mmHg","一般情况":"精神尚可。","专科检查":"咽部充血，扁桃体无肿大。"},"辅助检查":"血常规待查。","初步诊断":"急性上呼吸道感染","鉴别诊断":"急性咽炎，急性支气管炎","治疗方案":"建议口服抗生素（如阿莫西林）和清热解毒口服液，同时进行对症治疗。","医嘱":"多饮温水，饮食清淡，避免辛辣刺激食物。注意休息，避免劳累。戴口罩，防止交叉感染。","复诊建议":"若症状加重或出现高热，请及时复诊。"}},{id:"003",patientName:"王五",doctorName:"赵医生",date:"2025-07-06 09:15",summary:"患者王五，男性，60岁，主诉胸闷、气短。初步诊断：冠心病待查。",originalTranscript:[{sender:"doctor",text:"您好，有什么不舒服？"},{sender:"patient",text:"医生，我最近老是觉得胸闷，有时候会喘不上气。"},{sender:"doctor",text:"这种情况持续多久了？是在活动后加重吗？"},{sender:"patient",text:"大概半个月了，活动后会更明显。"}],quantifiedForm:{"基本信息":{"患者姓名":"王五","性别":"男","年龄":"60岁","就诊日期":"2025-07-06 09:15"},"主诉":"患者主诉近半月出现胸闷、气短，活动后加重。","现病史":"患者半个月前开始出现胸闷、气短症状，休息可缓解，无胸痛、心悸等不适。今日症状无明显缓解。","既往史":"高血压病史10年，规律服用降压药。","个人史":"吸烟史20年，已戒烟5年。","家族史":"父亲有冠心病史。","体格检查":{"体温":"36.5°C","脉搏":"70次/分","呼吸":"16次/分","血压":"135/85mmHg","一般情况":"神志清楚，无明显痛苦面容。","专科检查":"心肺听诊未闻及明显异常。"},"辅助检查":"建议行心电图、心脏彩超、心肌酶谱检查。","初步诊断":"冠心病待查","鉴别诊断":"心功能不全，肺部疾病","治疗方案":"建议完善相关检查以明确诊断，同时给予对症治疗，如吸氧、硝酸甘油等。","医嘱":"清淡饮食，低盐低脂。保持情绪稳定，避免剧烈运动。监测血压，按时服用降压药。戒烟限酒。","复诊建议":"完善检查后请及时复诊，以便明确诊断并调整治疗方案。"}}]),l=(0,i.KR)(1),t=(0,o.EW)(()=>{const e=(l.value-1)*ue,t=e+ue;return a.value.slice(e,t)}),r=e=>{l.value=e},n=(0,i.KR)(!1),u=(0,i.KR)(null),s=(0,i.KR)(!1),d=e=>{u.value=e,n.value=!0,s.value=!1},_=()=>{s.value=!s.value},p=(0,i.KR)(!1),m=(0,i.KR)({}),v=()=>{u.value&&u.value.quantifiedForm&&(m.value=JSON.parse(JSON.stringify(u.value.quantifiedForm)),p.value=!0)},b=()=>{u.value&&(u.value.quantifiedForm=JSON.parse(JSON.stringify(m.value)),p.value=!1,c.nk.success("量化表修改已保存（模拟）！"))},f=()=>{p.value=!1,m.value={}},k=()=>{p.value=!1,m.value={}},g=e=>{if(!e||!e.quantifiedForm)return void c.nk.error("没有量化表数据可以导出！");const a=[];a.push(["字段","内容"]);const l=(e,t="")=>{for(const o in e)if(Object.hasOwnProperty.call(e,o)){const r=t?`${t}.${o}`:o;"object"!==typeof e[o]||null===e[o]||Array.isArray(e[o])?a.push([r,e[o]]):l(e[o],r)}};l(e.quantifiedForm);const t=J.Wp.aoa_to_sheet(a),o=J.Wp.book_new();J.Wp.book_append_sheet(o,t,"量化表");const r=e.patientName||"未知患者",n=e.date?e.date.split(" ")[0]:"未知日期",u=`${r}_${n}_量化表.xlsx`;J._h(o,u),c.nk.success("量化表已成功导出！")};return(e,i)=>{const c=(0,o.g2)("el-table-column"),h=(0,o.g2)("el-button"),y=(0,o.g2)("el-table"),w=(0,o.g2)("el-pagination"),V=(0,o.g2)("el-input"),C=(0,o.g2)("el-form-item"),x=(0,o.g2)("el-form"),L=(0,o.g2)("el-dialog");return(0,o.uX)(),(0,o.CE)("div",null,[i[32]||(i[32]=(0,o.Lk)("h2",{class:"page-title"},"问诊记录列表",-1)),(0,o.bF)(y,{data:t.value,style:{width:"100%"},class:"consultation-table"},{default:(0,o.k6)(()=>[(0,o.bF)(c,{prop:"id",label:"ID",width:"80"}),(0,o.bF)(c,{prop:"patientName",label:"患者姓名",width:"120"}),(0,o.bF)(c,{prop:"doctorName",label:"医生姓名",width:"120"}),(0,o.bF)(c,{prop:"date",label:"问诊日期",width:"180"}),(0,o.bF)(c,{prop:"summary",label:"问诊摘要"}),(0,o.bF)(c,{label:"操作",width:"100"},{default:(0,o.k6)(e=>[(0,o.bF)(h,{link:"",type:"primary",size:"small",onClick:a=>d(e.row)},{default:(0,o.k6)(()=>i[23]||(i[23]=[(0,o.eW)("查看详情")])),_:2,__:[23]},1032,["onClick"])]),_:1})]),_:1},8,["data"]),(0,o.bF)(w,{class:"pagination",background:"",layout:"prev, pager, next",total:a.value.length,"page-size":ue,"current-page":l.value,onCurrentChange:r},null,8,["total","current-page"]),(0,o.bF)(L,{modelValue:n.value,"onUpdate:modelValue":i[22]||(i[22]=e=>n.value=e),"show-close":!0,width:"70%",class:"consultation-dialog",onClosed:k},{footer:(0,o.k6)(()=>[(0,o.Lk)("span",ne,[(0,o.bF)(h,{type:"success",onClick:i[21]||(i[21]=e=>g(u.value))},{default:(0,o.k6)(()=>i[31]||(i[31]=[(0,o.eW)("导出量化表 Excel")])),_:1,__:[31]})])]),default:(0,o.k6)(()=>[u.value?((0,o.uX)(),(0,o.CE)("div",Q,[(0,o.Lk)("h3",D,"患者姓名："+(0,F.v_)(u.value.patientName),1),(0,o.Lk)("p",null,[i[24]||(i[24]=(0,o.Lk)("strong",null,"医生姓名：",-1)),(0,o.eW)((0,F.v_)(u.value.doctorName),1)]),(0,o.Lk)("p",null,[i[25]||(i[25]=(0,o.Lk)("strong",null,"问诊日期：",-1)),(0,o.eW)((0,F.v_)(u.value.date),1)]),(0,o.Lk)("h4",null,[i[29]||(i[29]=(0,o.eW)("量化表内容： ")),p.value?((0,o.uX)(),(0,o.CE)("span",H,[(0,o.bF)(h,{link:"",type:"success",size:"small",onClick:b},{default:(0,o.k6)(()=>i[27]||(i[27]=[(0,o.eW)("保存")])),_:1,__:[27]}),(0,o.bF)(h,{link:"",type:"info",size:"small",onClick:f},{default:(0,o.k6)(()=>i[28]||(i[28]=[(0,o.eW)("取消")])),_:1,__:[28]})])):((0,o.uX)(),(0,o.Wv)(h,{key:0,link:"",type:"primary",size:"small",onClick:v,style:{"margin-left":"10px"}},{default:(0,o.k6)(()=>i[26]||(i[26]=[(0,o.eW)(" 编辑 ")])),_:1,__:[26]}))]),(0,o.Lk)("div",G,[p.value?((0,o.uX)(),(0,o.CE)("div",le,[(0,o.bF)(x,{model:m.value,"label-width":"120px"},{default:(0,o.k6)(()=>[(0,o.bF)(C,{label:"患者姓名"},{default:(0,o.k6)(()=>[(0,o.bF)(V,{modelValue:m.value.基本信息.患者姓名,"onUpdate:modelValue":i[0]||(i[0]=e=>m.value.基本信息.患者姓名=e)},null,8,["modelValue"])]),_:1}),(0,o.bF)(C,{label:"性别"},{default:(0,o.k6)(()=>[(0,o.bF)(V,{modelValue:m.value.基本信息.性别,"onUpdate:modelValue":i[1]||(i[1]=e=>m.value.基本信息.性别=e)},null,8,["modelValue"])]),_:1}),(0,o.bF)(C,{label:"年龄"},{default:(0,o.k6)(()=>[(0,o.bF)(V,{modelValue:m.value.基本信息.年龄,"onUpdate:modelValue":i[2]||(i[2]=e=>m.value.基本信息.年龄=e)},null,8,["modelValue"])]),_:1}),(0,o.bF)(C,{label:"就诊日期"},{default:(0,o.k6)(()=>[(0,o.bF)(V,{modelValue:m.value.基本信息.就诊日期,"onUpdate:modelValue":i[3]||(i[3]=e=>m.value.基本信息.就诊日期=e)},null,8,["modelValue"])]),_:1}),(0,o.bF)(C,{label:"主诉"},{default:(0,o.k6)(()=>[(0,o.bF)(V,{type:"textarea",modelValue:m.value.主诉,"onUpdate:modelValue":i[4]||(i[4]=e=>m.value.主诉=e)},null,8,["modelValue"])]),_:1}),(0,o.bF)(C,{label:"现病史"},{default:(0,o.k6)(()=>[(0,o.bF)(V,{type:"textarea",modelValue:m.value.现病史,"onUpdate:modelValue":i[5]||(i[5]=e=>m.value.现病史=e)},null,8,["modelValue"])]),_:1}),(0,o.bF)(C,{label:"既往史"},{default:(0,o.k6)(()=>[(0,o.bF)(V,{type:"textarea",modelValue:m.value.既往史,"onUpdate:modelValue":i[6]||(i[6]=e=>m.value.既往史=e)},null,8,["modelValue"])]),_:1}),(0,o.bF)(C,{label:"个人史"},{default:(0,o.k6)(()=>[(0,o.bF)(V,{type:"textarea",modelValue:m.value.个人史,"onUpdate:modelValue":i[7]||(i[7]=e=>m.value.个人史=e)},null,8,["modelValue"])]),_:1}),(0,o.bF)(C,{label:"家族史"},{default:(0,o.k6)(()=>[(0,o.bF)(V,{type:"textarea",modelValue:m.value.家族史,"onUpdate:modelValue":i[8]||(i[8]=e=>m.value.家族史=e)},null,8,["modelValue"])]),_:1}),(0,o.bF)(C,{label:"体温"},{default:(0,o.k6)(()=>[(0,o.bF)(V,{modelValue:m.value.体格检查.体温,"onUpdate:modelValue":i[9]||(i[9]=e=>m.value.体格检查.体温=e)},null,8,["modelValue"])]),_:1}),(0,o.bF)(C,{label:"脉搏"},{default:(0,o.k6)(()=>[(0,o.bF)(V,{modelValue:m.value.体格检查.脉搏,"onUpdate:modelValue":i[10]||(i[10]=e=>m.value.体格检查.脉搏=e)},null,8,["modelValue"])]),_:1}),(0,o.bF)(C,{label:"呼吸"},{default:(0,o.k6)(()=>[(0,o.bF)(V,{modelValue:m.value.体格检查.呼吸,"onUpdate:modelValue":i[11]||(i[11]=e=>m.value.体格检查.呼吸=e)},null,8,["modelValue"])]),_:1}),(0,o.bF)(C,{label:"血压"},{default:(0,o.k6)(()=>[(0,o.bF)(V,{modelValue:m.value.体格检查.血压,"onUpdate:modelValue":i[12]||(i[12]=e=>m.value.体格检查.血压=e)},null,8,["modelValue"])]),_:1}),(0,o.bF)(C,{label:"一般情况"},{default:(0,o.k6)(()=>[(0,o.bF)(V,{type:"textarea",modelValue:m.value.体格检查.一般情况,"onUpdate:modelValue":i[13]||(i[13]=e=>m.value.体格检查.一般情况=e)},null,8,["modelValue"])]),_:1}),(0,o.bF)(C,{label:"专科检查"},{default:(0,o.k6)(()=>[(0,o.bF)(V,{type:"textarea",modelValue:m.value.体格检查.专科检查,"onUpdate:modelValue":i[14]||(i[14]=e=>m.value.体格检查.专科检查=e)},null,8,["modelValue"])]),_:1}),(0,o.bF)(C,{label:"辅助检查"},{default:(0,o.k6)(()=>[(0,o.bF)(V,{type:"textarea",modelValue:m.value.辅助检查,"onUpdate:modelValue":i[15]||(i[15]=e=>m.value.辅助检查=e)},null,8,["modelValue"])]),_:1}),(0,o.bF)(C,{label:"初步诊断"},{default:(0,o.k6)(()=>[(0,o.bF)(V,{modelValue:m.value.初步诊断,"onUpdate:modelValue":i[16]||(i[16]=e=>m.value.初步诊断=e)},null,8,["modelValue"])]),_:1}),(0,o.bF)(C,{label:"鉴别诊断"},{default:(0,o.k6)(()=>[(0,o.bF)(V,{modelValue:m.value.鉴别诊断,"onUpdate:modelValue":i[17]||(i[17]=e=>m.value.鉴别诊断=e)},null,8,["modelValue"])]),_:1}),(0,o.bF)(C,{label:"治疗方案"},{default:(0,o.k6)(()=>[(0,o.bF)(V,{type:"textarea",modelValue:m.value.治疗方案,"onUpdate:modelValue":i[18]||(i[18]=e=>m.value.治疗方案=e)},null,8,["modelValue"])]),_:1}),(0,o.bF)(C,{label:"医嘱"},{default:(0,o.k6)(()=>[(0,o.bF)(V,{type:"textarea",modelValue:m.value.医嘱,"onUpdate:modelValue":i[19]||(i[19]=e=>m.value.医嘱=e)},null,8,["modelValue"])]),_:1}),(0,o.bF)(C,{label:"复诊建议"},{default:(0,o.k6)(()=>[(0,o.bF)(V,{modelValue:m.value.复诊建议,"onUpdate:modelValue":i[20]||(i[20]=e=>m.value.复诊建议=e)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])])):((0,o.uX)(),(0,o.CE)("ul",Y,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(u.value.quantifiedForm,(e,a)=>((0,o.uX)(),(0,o.CE)("li",{key:a},[(0,o.Lk)("strong",null,(0,F.v_)(a)+"：",1),"object"===typeof e&&null!==e?((0,o.uX)(),(0,o.CE)("span",Z,[(0,o.Lk)("ul",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e,(e,a)=>((0,o.uX)(),(0,o.CE)("li",{key:a},[(0,o.Lk)("strong",ee,(0,F.v_)(a)+"：",1),(0,o.eW)((0,F.v_)(e),1)]))),128))])])):((0,o.uX)(),(0,o.CE)("span",ae,(0,F.v_)(e),1))]))),128))]))]),(0,o.Lk)("h4",null,[i[30]||(i[30]=(0,o.eW)("原始对话录音转写： ")),(0,o.bF)(h,{link:"",type:"primary",size:"small",onClick:_,style:{"margin-left":"10px"}},{default:(0,o.k6)(()=>[(0,o.eW)((0,F.v_)(s.value?"隐藏":"显示"),1)]),_:1})]),s.value?((0,o.uX)(),(0,o.CE)("div",te,[(0,o.Lk)("ul",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(u.value.originalTranscript,(e,a)=>((0,o.uX)(),(0,o.CE)("li",{key:a,class:(0,F.C4)(["chat-message",e.sender])},[(0,o.Lk)("span",oe,(0,F.v_)("doctor"===e.sender?"医生":"患者")+"：",1),(0,o.Lk)("div",re,[(0,o.Lk)("p",null,(0,F.v_)(e.text),1)])],2))),128))])])):(0,o.Q3)("",!0)])):(0,o.Q3)("",!0)]),_:1},8,["modelValue"])])}}};const de=(0,v.A)(se,[["__scopeId","data-v-3b64e203"]]);var ie=de;const ce=[{path:"/",name:"Login",component:w},{path:"/index",name:"UserIndex",component:S,children:[{path:"",name:"ConsultationList",component:ie},{path:"settings",name:"UserSettings",component:X},{path:"speech-to-text",name:"SpeechToText",component:B}]}],_e=(0,d.aE)({history:(0,d.LA)("/ai-medical-record_zhizhenzhushou/"),routes:ce});_e.beforeEach((e,a,l)=>{const t=localStorage.getItem("token");"Login"===e.name||t?"Login"===e.name&&t?l({name:"ConsultationList"}):l():l({name:"Login"})});var pe=_e,me=l(5007);l(4188);const ve=(0,t.Ef)(s);ve.use(pe),ve.use(me.A),ve.mount("#app")},8764:function(__unused_webpack_module,__webpack_exports__){__webpack_exports__.A={props:{width:{type:Number,default:90},height:{type:Number,default:35},codeFont:{type:String,default:"22px arial"},codeType:{type:String,default:"code"},codeLength:{type:Number,default:5},strict:{type:Boolean,default:!0},calcRange:{type:Array,default:()=>[10,20]},calcSymbol:{type:Array,default:()=>["+","-","*"]},lineCount:{type:Number,default:5}},data(){return{canvas:null}},mounted(){const e=this.$refs.canvas;e.width=this.width,e.height=this.height,this.canvas=e.getContext("2d"),this.display()},methods:{display(){this.canvas.clearRect(0,0,this.width,this.height),this.createLine(),this.canvas.font=this.codeFont,this.canvas.textAlign="left",this.canvas.textBaseline="middle";let e=this.createCode();for(let a=0;a<this.codeLength;a++)this.canvas.save(),this.canvas.fillStyle=this.randomColor(),this.canvas.translate((a+.2)*this.width/this.codeLength,this.getRandom([.3*this.height,.7*this.height])),this.canvas.rotate(this.getRandom([-30,30])*Math.PI/180),this.canvas.fillText(e[a],0,0),this.canvas.restore()},createLine(){for(var e=0;e<this.lineCount;e++){let e=[-this.width/2,1.5*this.width],a=[-this.height/2,1.5*this.height];this.canvas.lineWidth=this.getRandom([1,3]),this.canvas.strokeStyle=this.randomColor(),this.canvas.beginPath(),this.canvas.moveTo(this.getRandom(e),this.getRandom(a)),this.canvas.lineTo(this.getRandom(e),this.getRandom(a)),this.canvas.stroke()}},createCode(){if("code"===this.codeType)return this.result=this.getString({length:this.codeLength}),this.$emit("getCode",this.strict?this.result:this.result.toLocaleLowerCase()),this.result;const SUB=this.getRandom(this.calcRange),SUM=this.getArray(this.calcSymbol),MIN=this.getRandom(this.calcRange);return this.result=eval(SUB+SUM+MIN),this.$emit("getCode",""+this.result),SUB+("*"==SUM?"x":SUM)+MIN},getRandom([e=0,a=0]){return Math.floor(Math.random()*(a-e+1))+e},getString({length:e,str:a="abacdefghjklmnopqrstuvwxyzABCDEFGHJKLMNOPQRSTUVWXYZ0123456789",split:l=0,join:t="-"}){let o="";for(let r=0;r<e;r++)l>0&&0!==r&&r%l===0&&(o+=t),o+=a[this.getRandom([0,a.length-1])];return o},isArray:function(e){return Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),Array.isArray(e)},getArray:function(e){if(!this.isArray(e))throw new Error("argument must be an Array");return e[Math.floor(Math.random()*e.length)]},randomColor(){return`#${(Math.random()*16777215..toString(10)).toString(16).slice(-6)}`}}}}},__webpack_module_cache__={};function __webpack_require__(e){var a=__webpack_module_cache__[e];if(void 0!==a)return a.exports;var l=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(l.exports,l,l.exports,__webpack_require__),l.exports}__webpack_require__.m=__webpack_modules__,function(){var e=[];__webpack_require__.O=function(a,l,t,o){if(!l){var r=1/0;for(d=0;d<e.length;d++){l=e[d][0],t=e[d][1],o=e[d][2];for(var n=!0,u=0;u<l.length;u++)(!1&o||r>=o)&&Object.keys(__webpack_require__.O).every(function(e){return __webpack_require__.O[e](l[u])})?l.splice(u--,1):(n=!1,o<r&&(r=o));if(n){e.splice(d--,1);var s=t();void 0!==s&&(a=s)}}return a}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[l,t,o]}}(),function(){__webpack_require__.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return __webpack_require__.d(a,{a:a}),a}}(),function(){__webpack_require__.d=function(e,a){for(var l in a)__webpack_require__.o(a,l)&&!__webpack_require__.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:a[l]})}}(),function(){__webpack_require__.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){__webpack_require__.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){__webpack_require__.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};__webpack_require__.O.j=function(a){return 0===e[a]};var a=function(a,l){var t,o,r=l[0],n=l[1],u=l[2],s=0;if(r.some(function(a){return 0!==e[a]})){for(t in n)__webpack_require__.o(n,t)&&(__webpack_require__.m[t]=n[t]);if(u)var d=u(__webpack_require__)}for(a&&a(l);s<r.length;s++)o=r[s],__webpack_require__.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return __webpack_require__.O(d)},l=self["webpackChunkai_medical_record"]=self["webpackChunkai_medical_record"]||[];l.forEach(a.bind(null,0)),l.push=a.bind(null,l.push.bind(l))}();var __webpack_exports__=__webpack_require__.O(void 0,[504],function(){return __webpack_require__(8440)});__webpack_exports__=__webpack_require__.O(__webpack_exports__)})();
//# sourceMappingURL=app.242bd87a.js.map